# Configuration for the Extended Kalman Filter (EKF)

ekf_filter_node:
  ros__parameters:
    use_sim_time: True
    frequency: 30.0
    sensor_timeout: 0.1
    map_frame: map
    odom_frame: odom
    base_link_frame: base_footprint # Your base_footprint frame
    world_frame: odom # Start world frame as odometry frame (common practice)

    # 1. Odometry Input (/odom from Gazebo diff drive plugin)
    odom0: odom
    odom0_config: [True, True, False,  # X, Y position
                   False, False, True,  # Yaw (Z rotation)
                   False, False, False, 
                   False, False, False]
    odom0_queue_size: 10
    odom0_nodelay: True

    # 2. IMU Input (/imu topic from Gazebo sensor)
    # Note: We assume the IMU topic is remapped to /imu/data in the launch file.
    imu0: imu
    imu0_config: [False, False, False, 
                  True, True, True,   # Fuse Roll, Pitch, Yaw orientation
                  False, False, False, 
                  True, False, False,  # Fuse X acceleration 
                  False, False, False]
    imu0_queue_size: 10
    imu0_nodelay: True
    imu0_differential: False
    imu0_remove_linear_acceleration_bias: True