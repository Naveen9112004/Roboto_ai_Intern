# Minimal configuration for Nav2 (DWA Planner, AMCL)

amcl:
  ros__parameters:
    use_sim_time: True
    set_initial_pose: True
    scan_topic: scan
    global_frame_id: map
    odom_frame_id: odom
    base_frame_id: base_footprint # Your robot's base frame

map_server:
  ros__parameters:
    use_sim_time: True
    yaml_filename: "your_map.yaml" # Placeholder for map file

controller_server:
  ros__parameters:
    use_sim_time: True
    # DWA settings
    min_vel_x: -0.5
    max_vel_x: 0.8
    max_vel_theta: 1.0
    acc_lim_x: 2.0

local_costmap:
  local_costmap:
    ros__parameters:
      # Sensor topics must match your bridge/URDF config
      plugins: ["obstacle_layer", "inflation_layer"]
      global_frame: odom
      robot_base_frame: base_footprint
      resolution: 0.05
      publish_frequency: 10.0
      width: 3.0
      height: 3.0
      static_map: False
      rolling_window: True

      obstacle_layer:
        plugin: "nav2_costmap_2d::ObstacleLayer"
        enabled: True
        observation_sources: scan
        scan:
          topic: scan # Your LiDAR topic
          max_obstacle_height: 2.0
          marking: True
          clearing: True
          data_type: "LaserScan"

bt_navigator:
  ros__parameters:
    use_sim_time: True

# Note: Many parameters omitted for brevity; this is a functional minimum.